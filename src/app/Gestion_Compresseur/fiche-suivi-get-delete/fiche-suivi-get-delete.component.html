<!-- <div class="container-fluid mt-2">
    <form [formGroup]="FicheSuiviSearchForm">
        <div class="row w-500 p-2 m-1 mb-2 border rounded " style="background-color: whitesmoke;">
            <div class="col-md-2">
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" class="form-control  form-control-sm" id="" placeholder="" formControlName="date" />
                </div>
            </div>
        </div>
    </form>

    <button (click)="onCreate()" class="btn btn-info" [hidden]="authService.currentUserRole == 'Admin'">
    <i class="pe-7s-plus " style="padding-right: 5px"></i>
    Ajouter
  </button>
    <div class="table-responsive">


        <table class="table  table-bordered  mt-1 ">
            <thead>
                <tr style="color: white; text-align: center;font-family:verdana; font-size: 75%;" class="bg-primary">
                    <th class="align-middle">Date</th>
                    <th class="align-middle">Compresseur</th>
                    <th class="align-middle">Filiale</th>
                    <th class="align-middle">Nombre total d'heures</th>
                    <th class="align-middle">Nbre d'heures en charge</th>
                    <th class="align-middle">Index électrique</th>
                    <th class="align-middle">Temps d'arrêt (panne)</th>
                    <th class="align-middle">Etat</th>
                    
                    <th class="align-middle">Frais d’Entretien et de Réparation </th>
                    <th class="align-middle">Prise compteur (dernier entretien)</th>
                    <th class="align-middle">Thuile (°C)</th>
                    <th class="align-middle">Tsécheur (°C)</th>
                    <th class="align-middle">Remarques</th>
                    <th style="width: 180px!important" [hidden]="authService.currentUserRole == 'Admin'"></th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="
          let g of data.list
            | filter: FicheSuiviSearchForm.value
            | paginate
              : { id: 'FicheSuiviPagination', itemsPerPage: 10, currentPage: p }
        " style="text-align:center;background-color: white">
                    <td>{{ g.date | date: "dd/MM/yyyy" }}</td>
                    <td>{{ GetCompFilialeByIDCorrespondance(g.equipementFilialeID)?.nom }}</td>
                    <td>{{ GetFilialeByIDCorrespondance(g.equipementFilialeID)?.nom }}</td>
                    <td>{{ g.nbre_Heurs_Total }}</td>
                    <td>{{ g.nbre_Heurs_Charge }}</td>
                    <td>{{ g.index_Electrique }}</td>
                    <td>{{ g.tempsArret }}</td>
                    <td *ngIf="g.etat == 0">En marche</td>
                    <td *ngIf="g.etat == 1">En panne</td>
                    <td *ngIf="g.etat == 2">En réserve</td>
                    
                    <td>{{ g.fraisEntretienReparation }}</td>
                    <td>{{ g.priseCompteur }}</td>
                    <td>{{ g.tHuileC }}</td>
                    <td>{{ g.tSecheurC }}</td>
                    <td>{{ g.remarques }}</td>

                    <td style="width: 180px!important" [hidden]="authService.currentUserRole == 'Admin'">
                        <button (click)="onEdit(g)" class="btn btn-info mr-3">
            <span class="pe-7s-pen"></span>
          </button>

                        <button (click)="delete(g.ficheSuiviID)" class="btn btn-danger " *ngIf="authService.currentUserRole != 'Responsable'">
            <span class=" pe-7s-trash"></span>
          </button>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
    <pagination-controls id="FicheSuiviPagination" (pageChange)="p = $event" previousLabel="Prc" nextLabel="Suiv">
    </pagination-controls>
</div> -->

<div class="container-fluid mt-2">
  <form
    [formGroup]="FicheSuiviSearchForm"
    class="col-md-4"
    [hidden]="authService.currentUserRole == 'Responsable'"
  >
    <div
      class="row w-500 p-2 m-1 mb-2 border rounded "
      style="background-color: whitesmoke;"
    >
      <div class="col-md-12">
        <div class="form-group">
          <label>Filiale</label>
          <select
            class="form-control  form-control-sm"
            id=""
            placeholder=""
            formControlName="filiale"
            #mySelect
            (change)="selectFiliale()"
          >
            <option [value]="0">-----------------------------</option>
            <option
              *ngFor="let fi of datafiliale.list"
              [value]="fi.filialeID"
              >{{ fi.nom }}</option
            >
          </select>
        </div>
      </div>
    </div>
  </form>

  <button
    (click)="onCreate()"
    class="btn btn-info"
    [hidden]="authService.currentUserRole == 'Admin'"
  >
    <i class="pe-7s-plus " style="padding-right: 5px"></i>
    Ajouter
  </button>
  <div
    class="table-responsive"
    *ngFor="
      let cf of listCF
        | paginate
          : { id: 'FicheSuiviPagination', itemsPerPage: 10, currentPage: p }
    "
  >
    <app-fiche-suivi
      *ngIf="GetExistFS(cf.equipementFilialeID)"
      [idFS]="cf.equipementFilialeID"
      [dateFS]="cf.equipementFilialeID"
      id="cf.equipementFilialeID"
    ></app-fiche-suivi>

    <!-- <app-fiche-suivi
      [idFS]="cf.equipementFilialeID"
      [dateFS]="cf.equipementFilialeID"
      id="cf.equipementFilialeID"
      value="cf.equipementFilialeID"
    ></app-fiche-suivi> -->
    <!-- <table class="table  table-bordered  mt-1 ">
            <thead>
                <tr style="color: white; text-align: center;font-family:verdana; font-size: 75%;" class="bg-primary">
                    <th class="align-middle">Date</th>
                    <th class="align-middle">Compresseur</th>
                    <th class="align-middle">Filiale</th>
                    <th class="align-middle">Nombre total d'heures</th>
                    <th class="align-middle">Nbre d'heures en charge</th>
                    <th class="align-middle">Index électrique</th>
                    <th class="align-middle">Temps d'arrêt (panne)</th>
                    <th class="align-middle">Etat</th>
                    
                    <th class="align-middle">Frais d’Entretien et de Réparation </th>
                    <th class="align-middle">Prise compteur (dernier entretien)</th>
                    <th class="align-middle">Thuile (°C)</th>
                    <th class="align-middle">Tsécheur (°C)</th>
                    <th class="align-middle">Remarques</th>
                    <th style="width: 180px!important" [hidden]="authService.currentUserRole == 'Admin'"></th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="
          let g of data.list
            | filter: FicheSuiviSearchForm.value
            | paginate
              : { id: 'FicheSuiviPagination', itemsPerPage: 10, currentPage: p }
              
        " style="text-align:center;background-color: white"        
        >
                    <td>{{ g.date | date: "dd/MM/yyyy" }}</td>
                    <td>{{ GetCompFilialeByIDCorrespondance(g.equipementFilialeID)?.nom }}</td>
                    <td>{{ GetFilialeByIDCorrespondance(g.equipementFilialeID)?.nom }}</td>
                    <td>{{ g.nbre_Heurs_Total }}</td>
                    <td>{{ g.nbre_Heurs_Charge }}</td>
                    <td>{{ g.index_Electrique }}</td>
                    <td>{{ g.tempsArret }}</td>
                    <td *ngIf="g.etat == 0">En marche</td>
                    <td *ngIf="g.etat == 1">En panne</td>
                    <td *ngIf="g.etat == 2">En réserve</td>
                    
                    <td>{{ g.fraisEntretienReparation }}</td>
                    <td>{{ g.priseCompteur }}</td>
                    <td>{{ g.tHuileC }}</td>
                    <td>{{ g.tSecheurC }}</td>
                    <td>{{ g.remarques }}</td>

                    <td style="width: 180px!important" [hidden]="authService.currentUserRole == 'Admin'">
                        <button (click)="onEdit(g)" class="btn btn-info mr-3">
            <span class="pe-7s-pen"></span>
          </button>

                        <button (click)="delete(g.ficheSuiviID)" class="btn btn-danger " *ngIf="authService.currentUserRole != 'Responsable'">
            <span class=" pe-7s-trash"></span>
          </button>
                    </td>
                </tr>
            </tbody>
        </table> -->
  </div>
  <pagination-controls
    id="FicheSuiviPagination"
    (pageChange)="p = $event"
    previousLabel="Prc"
    nextLabel="Suiv"
  >
  </pagination-controls>
</div>
